<%

# BioCatalogue: app/views/services/_index_facets.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<% unless @filter_message.blank? %>
	<p class="box_info_standout" style="font-weight: bold; text-align: center; padding: 0.3em 0.5em;">
		<%= @filter_message -%>
	</p>
<% end %>

<div>
	<%= link_to("Show all services", "#{services_url}#browse", :class => "standout_link", :style => "float:right; font-size: 90%; margin: 1px;") -%>	
	<div id="facets_header">
		<span class="text">Filtering</span>
	</div>
</div>

<div class="facets">
	<% service_type_facets = get_facets_for_service_types %>
	<table>
		<tr>
			<td class="type">
				Service Types
				<span class="faded">(<%= service_type_facets.length -%>)</span>
			</td>
			<td>
				<ul>
					<% service_type_facets.each do |f| %>
						<li>
							<%= link_to(h(f["name"]), generate_include_filter_url(:type, f["name"])) -%>
							<span class="faded count">
								(<%= pluralize(f["count"], "service") -%>)
							</span>
						</li>
					<% end %>
				</ul>
			</td>
		</tr>	
	</table>
	
	<hr/>
	
	<% service_provider_facets = get_facets_for_service_providers %>
	<table>
		<tr>
			<td class="type">
				Service Providers
				<span class="faded">(<%= service_provider_facets.length -%>)</span>
			</td>
			<td>
				<ul>
					<% service_provider_facets.each do |f| %>
						<li>
							<%= link_to(h(f["name"]), generate_include_filter_url(:prov, f["name"])) -%>
							<span class="faded count">
								(<%= pluralize(f["count"], "service") -%>)
							</span>
						</li>
					<% end %>
				</ul>
			</td>
		</tr>	
	</table>
</div>