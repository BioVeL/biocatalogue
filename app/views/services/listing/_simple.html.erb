<%

# BioCatalogue: app/views/services/listing/_simple.html.erb
#
# Copyright (c) 2010, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<% service_version_instance = service.latest_version.service_versionified %>

<div class="listing_item">
  <div class="simple_listing">
    <table style="width: 100%;">
      <tr>
        <td>
          <%= render :partial => "services/listing/name_section", :locals => { :service => service } -%>
          
          <% cache(:controller => 'services', :action => 'listing', :part => "categories", :service_id => service.id) do -%>
            <div style="margin-top: 0.8em;">
              <%= render :partial => "annotations/categories", 
                         :locals => { :service => service,
                                      :show_add_option => false,
                                      :show_modify_options => false } -%>
            </div>
          <% end %>
        </td>
        <%  benchmark "Rendered services/_listing/service_latest_status_symbol" do %>
          <td style="width: 60px; text-align: right; vertical-align: top; padding-bottom: 0.5em;">
            <%= service_latest_status_symbol(service) -%>
          </td>
        <% end %>
        </td>
      </tr>
    </table>
    
    <div class="box_annotations detail">
      <% unless (desc = service.preferred_description).blank? %>
        <% rounded(annotation_text_item_background_color, "#333", "100%") do %>
          <div class="text">
            <%= annotation_prepare_description(desc, true, 500, false) -%>
          </div>
        <% end %>
      <% end %>
    </div>
    
    <p class="detail">
          
      <b>Provider:</b>
      <% service.providers.each do |provider| %>
        <%= link_to(display_name(provider), service_provider_path(provider), :style => "vertical-align: middle;") %>
      <% end %>
      
    </p>
    
    <%= render :partial => "#{service_version_instance.class.to_s.pluralize.underscore}/service_listing_info", 
               :locals => { :service_version_instance =>  service_version_instance } %>
    
  </div>
</div>