<%

# BioCatalogue: app/views/services/_index_filters.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<% rounded "#EEE", "#333", "100%" do %>

	<div id="filters_header">
		<span class="text">Filtering</span>
		<span style="vertical-align:middle; margin-left:0.5em;">
			<%= help_icon_with_tooltip(help_text_for_filtering) -%>
		</span>
	</div>
	
	<div class="filters">
		
		<%= render :partial => "filtering/selected_filters" -%>
		
		<p class="center" style="margin: 0; margin-bottom: 0.7em;">
			Select filters from below...
		</p>
		
		<p class="center" style="margin: 0; margin-bottom: 0.7em;">
			<%= service_index_tag_filters_on_off_link -%>
		</p>
		
		<!-- Service Types -->
		<% service_types_filters = BioCatalogue::Filtering::Services.get_filters_for_service_types %>
		<%= render :partial => "filtering/filter_options_generic", 
							 :locals => { :filters => service_types_filters,
														:filter_type => :t } -%>
		
		<!-- Categories -->
		<%= render :partial => "filtering/filter_options_categories", 
							 :locals => { :filter_type => :cat } -%>
		
		<%# Only show tag filters if explicitly asked %>
		<% if show_tag_filters? %>
		
			<!-- Tags -->												
			<% tags_filters = BioCatalogue::Filtering::Services.get_filters_for_all_tags(100) %>
			<%= render :partial => "filtering/filter_options_generic", 
								 :locals => { :filters => tags_filters,
															:filter_type => :tag } -%>
		
			<!-- Tags (on Services) -->												
			<% operations_tags_filters = BioCatalogue::Filtering::Services.get_filters_for_service_tags(100) %>
			<%= render :partial => "filtering/filter_options_generic", 
								 :locals => { :filters => operations_tags_filters,
															:filter_type => :tag_s } -%>
															
			<!-- Tags (on Operations) -->												
			<% operations_tags_filters = BioCatalogue::Filtering::Services.get_filters_for_soap_operation_tags(100) %>
			<%= render :partial => "filtering/filter_options_generic", 
								 :locals => { :filters => operations_tags_filters,
															:filter_type => :tag_ops } -%>
		
			<!-- Tags (on Inputs) -->												
			<% inputs_tags_filters = BioCatalogue::Filtering::Services.get_filters_for_soap_input_tags(100) %>
			<%= render :partial => "filtering/filter_options_generic", 
								 :locals => { :filters => inputs_tags_filters,
															:filter_type => :tag_ins } -%>
		
			<!-- Tags (on Outputs) -->												
			<% outputs_tags_filters = BioCatalogue::Filtering::Services.get_filters_for_soap_output_tags(100) %>
			<%= render :partial => "filtering/filter_options_generic", 
								 :locals => { :filters => outputs_tags_filters,
															:filter_type => :tag_outs } -%>
		
		<% end %>
		
		<!-- Service Providers -->
		<% service_provider_filters = BioCatalogue::Filtering::Services.get_filters_for_service_providers %>
		<%= render :partial => "filtering/filter_options_generic", 
							 :locals => { :filters => service_provider_filters,
														:filter_type => :p } -%>
		
		<!-- Submitters -->
		<%= render :partial => "filtering/filter_options_submitters" -%>
											
		<!-- Countries -->									
		<% country_filters = BioCatalogue::Filtering::Services.get_filters_for_countries %>
		<%= render :partial => "filtering/filter_options_generic", 
							 :locals => { :filters => country_filters,
														:filter_type => :c } -%>
		
	</div>

<% end %>

