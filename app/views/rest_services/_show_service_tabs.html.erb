<%
  
  # BioCatalogue: app/views/rest_services/_show_service_tabs.html.erb
  #
  # Copyright (c) 2009-2010, University of Manchester, The European Bioinformatics 
  # Institute (EMBL-EBI) and the University of Southampton.
  # See license.txt for details
  
%>

<% 
  # This tab uses the same stylesheet elements as the operations tab for SOAP services.
%>

<% resources = service_version_instance.rest_resources.sort %>

<% s_d = service_version_instance.service.latest_deployment -%>
<% base_endpoint = s_d.endpoint.to_s.sub(/\/$/, '') -%>
<% endpoint_count = 0 %>

<div id="tab-endpoints" class="tabbertab">
  <% resources.each { |res| endpoint_count += res.rest_methods.size } %>
  <h3>Endpoints (<%= endpoint_count -%>)</h3>

	<a name='endpoints_top'></a>
	
  <%= add_endpoints_by_popup(service_version_instance, 
                             :style => "padding:7px; line-height:6px; text-align:center;", 
                             :class => "button_slim") %>

  <!--WHAT ARE ENDPOINTS HELP BOX-->                             
  <div style="width: 80%;"><%= render :partial => "rest_services/help_box" -%></div>


	<div class="operations_quick_browse_box">
		<span class="heading">
			Quick Browse
		</span>
    |
		<% resources.each do |res| %>
      <% res.rest_methods.sort.each do |meth| %>
        <span class="entry">
          <%= link_to display_name(meth), meth -%>
        </span>
      <% end %>
			|
		<% end %>
	</div>
	
  
  <%= render :partial => "rest_methods/listing", 
             :locals => { :items => resources, :base_endpoint => base_endpoint } -%>

	<p style="margin: 0 0 1.5em 0; font-size: 93%; text-align: right;">
		<a href="#endpoints_top">Back to top</a>
	</p>
  
</div>
