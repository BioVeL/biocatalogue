<%

# BioCatalogue: app/views/annotations/_tags_flat.html.erb
#
# Copyright (c) 2008, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<%# Set defaults for optional parameters to this partial... %>
<% show_add_option = true unless local_assigns.has_key?(:show_add_option) %>

<% unless annotatable.nil? %>
	<% if show_add_option == true %>
		<% if logged_in? %>
			<%= annotation_add_by_popup_link annotatable,
																		 	 :attribute_name => "Tag",
				                             	 :tooltip_text => '',
				                             	 :link_text => 'Add tags',
				                             	 :show_icon => false, 
				                             	 :show_not_logged_in_text => false,
				                             	 :multiple => true,
																			 :style => "float: right; margin-left: 1em;" -%>
		<% else %>
		 	<%= link_to "Log in", login_path -%> to add tags
		<% end %>
	<% end %>
	
	<p>
		<b>Tags:</b>
		<% unless (tag_annotations = annotatable.annotations_with_attribute("tag")).empty? %>
			| 
			<% tag_annotations.map{|ann| ann.value}.uniq.sort.each do |val| %>
				<%= h(val) -%> |
			<% end %>
		<% else %>
			<span class="none_text">none</span>
		<% end %>
	</p>
<% end %>