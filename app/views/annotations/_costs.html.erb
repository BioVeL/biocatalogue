<%

# BioCatalogue: app/views/annotations/_costs.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<% unless annotatable.nil? %>
	<div class="annotations_container">
		<div style="margin-top: 1em;">
		  <b>Cost:</b>
			<%= info_icon_with_tooltip("How much does this service cost to use? This can be 'Free' or a simple value or have a lengthy text explanation or point to a web page with more info.") -%>
			
			<%= annotation_add_by_popup_link annotatable,
			     :attribute_name => "cost",
					 :link_text => "Add cost info",
			     :tooltip_text => "Click to add info on how much this service costs to use. This can be 'Free' or a simple value or have a lengthy text explanation or point to a web page with more info.",
			     :style => "margin-left: 1em;" -%>

		</div>
		
		<div class="box_annotations">
			<% cost_annotations = annotatable.annotations_with_attribute("cost") %>
			<% unless cost_annotations.empty? %>
				<% cost_annotations.each do |ann| %>
					<% rounded(annotation_text_item_background_color, "#333", "100%") do %>
						<div class="text">
							<%= annotation_source_text(ann) -%>
							<div>
								<%= annotation_prepare_description(ann.value) -%>
							</div>
							<% if mine?(ann) %>
								<p class="actions">
									<span><%= annotation_edit_by_popup_link(ann) -%></span>
									<span style="margin-left: 1em;"><%= link_to("delete", annotation_path(ann), :method => :delete, :confirm => "Are you sure you want to delete this piece of info on cost?", :style => 'vertical-align: middle;')-%></span>
								</p>
							<% end %>
						</div>
					<% end %>
				<% end %>
			<% else %>
				<span class="none_text">none</span>
			<% end %>
		</div>
	</div>
<% end %>