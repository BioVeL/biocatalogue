<%

# BioCatalogue: app/views/stats/index.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<div style="float:right;">
	<ul class="buttons">
		<li class="first">
			<%= link_to(image_tag('refresh.gif') + " Refresh", refresh_stats_path) -%>
		</li>
	</ul>
</div>

<div id="stats_page">
	
<h1>Statistics</h1>

	<p><b>Last calculated: <%= Time.now.to_s -%></b> (click on the refresh button to the right to calculate latest stats)</p>

	<h4>General</h4>
	
	<div class="box_indented_with_bar">
		
		<p>
			<b>Services:</b>
			<%= @stats.total Service -%>
		</p>
		
		<p>
			<b>Service Versions:</b>
			<%= @stats.total ServiceVersion -%>
		</p>
			
		<p>
			<b>Service Deployments:</b>
			<%= @stats.total ServiceDeployment -%>
		</p>
		
		<p>
			<b>SOAP Services:</b>
			<%= @stats.total SoapService -%>
		</p>
				
		<p>
			<b>SOAP Operations:</b>
			<%= @stats.total SoapOperation -%>
		</p>
					
		<p>
			<b>SOAP Inputs:</b>
			<%= @stats.total SoapInput -%>
		</p>
						
		<p>
			<b>Soap Outputs:</b>
			<%= @stats.total SoapOutput -%>
		</p>
					
		<p>
			<b>REST Services:</b>
			<%= @stats.total RestService -%>
		</p>
				
		<p>
			<b>SOAPLAB Servers:</b>
			<%= @stats.total SoaplabServer -%>
		</p>
			
		<p>
			<b>Users:</b>
			<%= @stats.total User -%>
		</p>
		
		<p>
			<b>Service Providers:</b>
			<%= @stats.total ServiceProvider -%>
		</p>
		
		<p>
			<b>Annotations*:</b>
			<%= @stats.total Annotation -%>
		</p>
		
		<p class="box_info_standout">
			<b>*</b> These are ONLY the annotations stored within the generic Annotations mechanism and 
			do not include the initial metadata (from WSDL for SOAP) that is stored directly in database 
			tables for the entities.
		</p>
		
	</div>
	
	<br/>
	
	<h4>Metadata *</h4>
	
	<div class="box_indented_with_bar">
		
		<p class="box_info_standout">
			<b>*</b> These include all the annotations stored via the generic Annotations mechanism AND 
			the initial metadata (from WSDL for SOAP) that is stored directly in database tables for the entities.
		</p>
		
		<% BioCatalogue::Annotations.metadata_sources.each do |type| %>
		
			<p><b>By <%= type.to_s.titleize -%></b></p>
			
			<div class="box_indented_with_bar">
				
				<%= render :partial => 'metadata_stats_for_type', :locals => { :type => type } -%>
				
			</div>
		
		<% end %>
		
		<p><b>By ALL metadata sources:</b></p>
		
		<div class="box_indented_with_bar">
			
			<%= render :partial => 'metadata_stats_for_type', :locals => { :type => :total } -%>
			
		</div>
				
	</div>

</div>