<%

# BioCatalogue: app/views/widgets/_action_bar.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<div id="action_bar">
	<% form_tag search_url, :method => :get, :style => "display: inline;" do %>
	
	  Search:
		
		<%= text_field_tag :q, 
											 params[:q], 
											 :id => "action_bar_search_field", 
											 :size => 28, 
											 :autocomplete => "off",
											 :onkeyup => "disableIfBlank('action_bar_search_field', 'action_bar_search_type_dropdown');" -%>
		
		<%= select_tag :t, 
									 options_for_select(BioCatalogue::Search::VALID_SEARCH_TYPES_INCL_ALL.collect { |t| [t.titleize, t] }, 
									 params[:t]),
									 :disabled => true,
									 :id => "action_bar_search_type_dropdown",
									 :style => "width: 140px; font-size: 85%; vertical-align: middle;" %>
		
		<div class="auto_complete" id="action_bar_search_auto_complete" style="display:inline;"></div>
		
		<%= auto_complete_field "action_bar_search_field",
				:update => "action_bar_search_auto_complete",
				:url => search_auto_complete_url,
				:min_chars => 3 -%>
		
	  <%= submit_tag '', :class => "search_button" -%>
				
	<% end %>
	
	<span id="action_links">
		<%= link_to 'Browse', services_path %>
		<%= link_to 'Register a Service', new_service_path %>
	</span>
</div>

<div id="action_icons">
	<%= link_to(image_tag(icon_filename_for(:atom)), services_url(:format => :atom), :title => tooltip_title_attrib("Subscribe to the <b>Latest Services</b> feed"), :target => "_blank") -%>
	<%= render :partial => "widgets/twitter" -%>
</div>
