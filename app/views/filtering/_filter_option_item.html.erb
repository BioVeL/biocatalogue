<%

# BioCatalogue: app/views/filtering/_filter_option_item.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<% 
	 text_full = h(filter["name"])
	 text_to_display = get_text_to_display_for_filter_value(filter_type, filter["name"])
	 count = filter['count']

	 selected = is_filter_selected(filter_type, filter["name"])
	 url = selected ? generate_exclude_filter_url(filter_type, filter["name"]) : generate_include_filter_url(filter_type, filter["name"]) 
%>

<span class="container">
	
	<% if text_full == BioCatalogue::Filtering::UNKNOWN_TEXT %>
	
		<span class="text" title="<%= tooltip_title_attrib(text_full) -%>"><%= text_to_display -%></span>
			
		<% unless count.blank? %>
			<span class="faded count">(<%= count -%>)</span>
		<% end %>
		
	<% else %>
		
		<% link_to(url, :class => (selected ? "selected" : nil), :title => tooltip_title_attrib(h(text_full))) do -%>
			
			<% if selected %>
				<span class="deselect">&nbsp</span>
			<% end %>
			
			<span class="text"><%= text_to_display-%></span>
			
			<% unless count.blank? %>
				<span class="faded count">(<%= count -%>)</span>
			<% end %>
			
		<% end %>
		
	<% end %>
	
</span>
