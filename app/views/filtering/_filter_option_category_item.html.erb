<%

# BioCatalogue: app/views/filtering/_filter_option_category_item.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<% 
  category_li_class = level > 0 ? 'sub_category' : 'category_root'
	category_li_style = "margin-left: #{level*1}em;"
	filter = { }
%>
				
<li class="<%= category_li_class -%>" style="<%= category_li_style -%>">
	<%  benchmark "Category filter number_of_services_for_category call" do %>
		<% filter = { 'name' => category.id, 'count' => BioCatalogue::Categorising.number_of_services_for_category(category) } %>
	<% end %>
	
	<%= render :partial => 'filtering/filter_option_item',
						 :locals => { :filter => filter,
													:filter_type => filter_type } -%>
</li>

<% if category.has_children? %>

	<ul class="<%= hidden_items_class -%>" style="<%= (filters_all_cookie_current_value == 'true' ? '' : 'display:none;') -%>">
		<% category.children.each do |child| %>
			<%= render :partial => 'filtering/filter_option_category_item',
								 :locals => { :category => child,
															:filter_type => filter_type,
															:level => level + 1,
															:filters_all_cookie_current_value => filters_all_cookie_current_value,
															:hidden_items_class => hidden_items_class } -%>
		<% end %>
	</ul>
	
<% end %>