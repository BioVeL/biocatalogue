<%

# BioCatalogue: app/views/faceting/_facet_options.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<%# This partial must be used within a <div> element with class="facets" %>

<div class="facet_type_box">
		
	<% rounded "#FFF", "#333", "100%" do %>
		
		<p class="type">
			<%= BioCatalogue::Faceting.filter_type_to_display_name(facet_type) -%>
			<span class="faded">(<%= facets.length -%>)</span>
		</p>
		
		<% 
			facets_all_cookie_current_value = get_facets_all_cookie_value(facet_type)
			initial_no_to_show = 10
			hidden_items_class = "facets_hidden_#{facet_type}"
		%>
		
		<ul>
			<%# Show the first x amount...  %>
			<% facets[0...initial_no_to_show].each do |facet| %>
				<li>
					<%= render :partial => 'faceting/facet_options_item',
										 :locals => { :facet => facet,
																	:facet_type => facet_type } -%>
				</li>
			<% end %>
			
			<%# ... hide the rest if there are more... %>
			<% unless (hidden_facets = facets[initial_no_to_show...facets.length]).blank? %>
				<% hidden_facets.each do |facet| %>
					<li class='<%= hidden_items_class -%>' style="<%= (facets_all_cookie_current_value == "true" ? "" : "display:none;") -%>">
						<%= render :partial => 'faceting/facet_options_item',
											 :locals => { :facet => facet,
																		:facet_type => facet_type } -%>
					</li>
				<% end %>
			<% end %>
		</ul>
		
		<%# ... make available the option to show all, if there are more. %>
		<% if facets.length > initial_no_to_show %>
			<p class="more_less_links" style="margin-top: 0.8em;">
				<%= render_show_hide_links(facet_type, hidden_items_class) -%>
			</p>
		<% end %>
		
	<% end %>
		
</div>
