<%

# BioCatalogue: app/views/faceting/_options.html.erb
#
# Copyright (c) 2009, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<%# This partial must be used within a <div> element with class="facets" %>

<table>
	<tr>
		<td class="type">
			<%= facet_type_display_name -%>
			<span class="faded">(<%= facets.length -%>)</span>
		</td>
		<td>
			<ul>
				<% facets.each do |f| %>
					<li>
						<span class="container">
							<% selected = is_filter_selected(facet_type_query_key, f["name"]) %>
							<% url = selected ? generate_exclude_filter_url(facet_type_query_key, f["name"]) : generate_include_filter_url(facet_type_query_key, f["name"]) %>
							<% link_to(url, :class => (selected ? "selected" : nil)) do -%>
								<span class="text"><%= h(f["name"]) -%></span>
								<span class="faded count">(<%= f["count"] -%>)</span>
								<% if selected %>
									<span class="deselect">&nbsp</span>
								<% end %>
							<% end %>
						</span>
					</li>
				<% end %>
			</ul>
		</td>
	</tr>	
</table>