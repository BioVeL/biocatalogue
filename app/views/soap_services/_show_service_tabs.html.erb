<%

# BioCatalogue: app/views/soap_services/_show_service_tabs.html.erb
#
# Copyright (c) 2008, University of Manchester, The European Bioinformatics 
# Institute (EMBL-EBI) and the University of Southampton.
# See license.txt for details

%>

<% ops = service_version_instance.soap_operations %>

<div id="tab-operations" class="tabbertab">
  <h3>Operations (<%= ops.length -%>)</h3>
	
	<a name='operations_index'></a>
	<div style="padding: 1em 0.6em; border: 1px solid #CCC; line-height: 1.5; background-color: #F3F3F3; font-weight: bold; font-size: 110%;">
		<% ops.each do |operation| %>
			<span style="margin: 0 0.4em;">
				<%= content_tag(:a, h(operation.name), :href => "#soap_operation_#{operation.id}") -%>
			</span>
		<% end %>
	</div>
	
	<% ops.each do |operation| %>
		<a name='<%= "soap_operation_#{operation.id}" -%>'></a>
		<div style="margin: 1em 0; padding: 1.5em 1.2em 1em 1.2em; border: 1px solid #CCC; line-height: 1.5;">
			<div>
				<div style="float: left; width: 73%;">
					<b>Operation:</b>
					<span class="operation_name" style="font-size: 1.2em;"><%= h operation.name -%></span>
					
					<div style="margin-top: 0.6em;">
						<%= render :partial => "annotations/name_aliases",
										 	 :locals => { :annotatable => operation } -%>
					</div>
					
					<div>
						<%= render :partial => "annotations/descriptions",
										 	 :locals => { :annotatable => operation } -%>
					 
					</div>
					
					<div>
						<%= render :partial => "annotations/other_annotations",
						 		 			 :locals => { :annotatable => operation } -%>
					</div>
				</div>
				
				<div style="float: right; width: 24%; font-size: 0.9em;">
					<%= render :partial => "annotations/tags_box",
						 				 :locals => { :annotatable => operation } -%>
				</div>
				
				<span class="clear"></span>
			</div>
			
			<br/>
			
			<b>Inputs:</b>
			<div class="box_indented_with_bar" style="margin: 1em 0 0 1.5em;">
				<% operation.soap_inputs.each do |input| %>
					<div class="port">
						<div style="float: left; width: 73%;">
							<div style="margin-bottom: 0.6em;">
								<span class="operation_name"><%= h input.name -%></span>
								<% unless input.computational_type.blank? %>
							  	(<%= h input.computational_type -%>) 
								<% end %>
							</div>
							
							<%= render :partial => "annotations/name_aliases",
									 	 		 :locals => { :annotatable => input } -%>
							<%= render :partial => "annotations/descriptions",
							 	 				 :locals => { :annotatable => input } -%>
							<%= render :partial => "annotations/examples",
							 	 				 :locals => { :annotatable => input } -%>
							<%= render :partial => "annotations/other_annotations",
						 		 		 		 :locals => { :annotatable => input } -%>
						</div>
						<div style="float: right; width: 24%; font-size: 0.9em;">
							<%= render :partial => "annotations/tags_box",
								 				 :locals => { :annotatable => input } -%>
						</div>
						<span class="clear"></span>	
					</div>
				<% end %>
			</div>
			
			<br/>
					
			<b>Outputs:</b>
			<div class="box_indented_with_bar" style="margin: 0.7em 0 0 1.5em;">
				<% operation.soap_outputs.each do |output| %>
					<div class="port">
						<div style="float: left; width: 73%;">
							<div style="margin-bottom: 0.6em;">
								<span class="operation_name"><%= h output.name -%></span>
								<% unless output.computational_type.blank? %>
							  	(<%= h output.computational_type -%>) 
								<% end %>
							</div>
							
							<%= render :partial => "annotations/name_aliases",
									 	 		 :locals => { :annotatable => output } -%>
							<%= render :partial => "annotations/descriptions",
							 	 				 :locals => { :annotatable => output } -%>
							<%= render :partial => "annotations/examples",
							 	 				 :locals => { :annotatable => output } -%>
							<%= render :partial => "annotations/other_annotations",
						 		 		 		 :locals => { :annotatable => output } -%>
						</div>
						<div style="float: right; width: 24%; font-size: 0.9em;">
							<%= render :partial => "annotations/tags_box",
								 				 :locals => { :annotatable => output } -%>
						</div>
						<span class="clear"></span>
					</div>
				<% end %>
			</div>
			
		</div>
		<p style="margin: 0 0 1.5em 0; font-size: 90%;">
			<a href="#operations_index">Back to top</a>
		</p>
	<% end %>
  
</div>
